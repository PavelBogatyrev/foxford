var advcake_helper={uid:function(){return Math.random().toString(36).slice(2)},guid:function(){function a(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},get_q:function(b){var a=window.location.search;return(a=a.match(new RegExp(b+"=([^&=]+)")))?a[1]:""},queryBuilder:function(a){var b=[];for(var c in a)b.push(c+"="+a[c]);return b.join("&")},getUrlElement:function(b){var a=document.createElement("a");return a.href=b,a},setCookie:function(h,c,b){var a=(b=b||{}).expires;if("number"==typeof a&&a){var d=new Date;d.setTime(d.getTime()+1e3*a),a=b.expires=d}a&&a.toUTCString&&(b.expires=a.toUTCString()),c=encodeURIComponent(c);var e=h+"="+c;for(var f in b){e+="; "+f;var g=b[f];!0!==g&&(e+="="+g)}document.cookie=e},getCookie:function(b){var a=document.cookie.match(new RegExp("(?:^|; )"+b.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return a?decodeURIComponent(a[1]):void 0},getDate:function(){var a=new Date;return a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)+" "+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+":"+("0"+a.getSeconds()).slice(-2)},cleanString:function(a){return null==a?"":(a=a.replace(/['"]/g,"")).replace(/&quot;/g,"")},post:function(h,a){var b=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest),e=a,f=!1;if("object"==typeof a){var c=String(Math.random()).slice(2),i="--"+c+"\r\n",j="--"+c+"--\r\n",g=["\r\n"];for(var d in a)a.hasOwnProperty(d)&&g.push('Content-Disposition: form-data; name="'+d+'"\r\n\r\n'+a[d]+"\r\n");f=!0,e=g.join(i)+j}if("withCredentials"in b){try{b.open("POST",h,!0),f&&b.setRequestHeader("Content-Type","multipart/form-data; boundary="+c)}catch(k){return!1}b.send(e),b.onreadystatechange=function(){return 4===b.readyState}}},get:function(b,c){var a=new XMLHttpRequest;if("withCredentials"in a){try{a.open("GET",b+"?"+advcake_helper.queryBuilder(c),!0)}catch(d){return!1}a.send(),a.onreadystatechange=function(){return 4===a.readyState}}},pixel:function(a,b){new Image().src=a+"?"+advcake_helper.queryBuilder(b)}},advcake_int={domain:".foxford.ru",hitUrl:"//hit.acstat.com/foxford/",postbackUrl:"https://api.ekacvda.com/postback/foxford",utm_source:"utm_source",utm_partner:"utm_campaign",utm_webmaster:"utm_content",utm_params:"advcake_params",cookie_partner:"advcake_utm_partner",cookie_webmaster:"advcake_utm_webmaster",cookie_params:"advcake_click_id",cookie_session_id:"advcake_session_id",cookie_track_id:"advcake_trackid",cookie_track_url:"advcake_track_url",cookie_lifetime:2592e3,vars:{page_hash:""},init:function(){advcake_int.setPageHash(),advcake_int.setTrackId(),advcake_int.setSessionId(),advcake_int.checkCommon()&&(advcake_int.setTrackUrl(),advcake_int.setPartner(),advcake_int.setWebmaster(),advcake_int.setClickId())},checkCommon:function(){return""!==advcake_helper.get_q(advcake_int.utm_source)||advcake_helper.get_q("gclid")||advcake_helper.get_q("yclid")},checkCake:function(){return"advcake"===advcake_helper.get_q(advcake_int.utm_source)||advcake_helper.get_q("advcake")},setPageHash:function(){advcake_int.vars.page_hash=advcake_helper.uid()},setSessionId:function(){void 0===advcake_int.getSessionId()&&advcake_helper.setCookie(advcake_int.cookie_session_id,advcake_helper.guid(),{expires:advcake_int.cookie_lifetime,domain:advcake_int.domain,path:"/"})},getSessionId:function(){return advcake_helper.getCookie(advcake_int.cookie_session_id)},setTrackId:function(){(advcake_int.checkCommon()||""===advcake_int.getTrackId())&&advcake_helper.setCookie(advcake_int.cookie_track_id,advcake_helper.guid(),{expires:advcake_int.cookie_lifetime,domain:advcake_int.domain,path:"/"})},getTrackId:function(){return advcake_helper.getCookie(advcake_int.cookie_track_id)||""},setWebmaster:function(){},getWebmaster:function(){return advcake_helper.getCookie(advcake_int.cookie_webmaster)||""},parseWebmaster:function(){return advcake_helper.get_q(advcake_int.utm_webmaster)},setPartner:function(){},getPartner:function(){return advcake_helper.getCookie(advcake_int.cookie_partner)||""},parsePartner:function(){return advcake_helper.get_q(advcake_int.utm_partner)},setClickId:function(){},getClickId:function(){return advcake_helper.getCookie(advcake_int.cookie_params)||""},parseClickId:function(){return advcake_helper.get_q(advcake_int.utm_params)},setTrackUrl:function(){localStorage[advcake_int.cookie_track_url]=location.href},getTrackUrl:function(a){a=a||!0;var b=localStorage[advcake_int.cookie_track_url]||"";return a?encodeURIComponent(b):b},getQuerySource:function(){return advcake_helper.get_q(advcake_int.utm_source)},getQueryMedium:function(){return advcake_helper.get_q("utm_medium")},getReferrer:function(a){return a=a||!0,encodeURIComponent(document.referrer)},isIframe:function(){return window!==window.top?1:0},getIframeLand:function(a){a=a||!0;var b="";try{advcake_int.isIframe()&&(b=window.top.location.href)}catch(c){}return a?encodeURIComponent(b):b},getLand:function(a){return a=a||!0,encodeURIComponent(location.href)},sendHit:function(){advcake_helper.pixel(advcake_int.hitUrl,{sid:advcake_int.getSessionId(),t_tid:advcake_int.getTrackId(),t_dp:advcake_int.getClickId(),wid:advcake_int.getWebmaster(),par:advcake_int.getPartner(),ref:advcake_int.getReferrer(),t_t:advcake_int.getQueryMedium(),t_if:advcake_int.isIframe(),t_s:advcake_int.getQuerySource(),if_p:advcake_int.getIframeLand(),ih:innerHeight,iw:innerWidth,s_w:screen.width,s_h:screen.height,land:advcake_int.getLand(),t_url:advcake_int.getTrackUrl()})}};if(advcake_int.init(),advcake_int.sendHit(),window.advcakeCorrection=function(a){if(void 0!==a&& void 0!==a.pageType)switch(a.pageType=parseInt(a.pageType),a.user=a.user||{},a.user.type=a.user.type||"",a.user.email=a.user.email||"",a.pageType){case 1:break;case 2:a.currentCategory=a.currentCategory||{};break;case 3:a.products=a.products||[],a.currentCategory=a.currentCategory||{};break;case 4:case 5:a.basketProducts=a.basketProducts||[];break;case 6:a.orderInfo=a.orderInfo||{},a.orderInfo.coupon=a.orderInfo.coupon||"",a.orderInfo.totalPrice=a.orderInfo.totalPrice||0,a.basketProducts=a.basketProducts||[];break;case 7:a.products=a.products||[],a.basketProducts=a.basketProducts||[]}return a},window.advcakeRetarget=function(a){},window.advcakeEvents=function(a){!a||"object"!=typeof a||Array.isArray(a)||("function"==typeof window.advcakeCorrection&&(a=window.advcakeCorrection(a)),void 0!==a&&"function"==typeof window.advcakeRetarget&&window.advcakeRetarget(a))},window.advcake_data=window.advcake_data||[],!0!==window.advcake_data_push_flag){window.advcake_data_push_flag=!0;var a=window.advcake_data.push;window.advcake_data.push=function(b){var c=a.apply(this,arguments);return window.advcakeEvents(b),c}}"object"==typeof window.advcake_data&& void 0!==window.advcake_data.forEach&&window.advcake_data.forEach(function(a){"object"==typeof a&&window.advcakeEvents(a)}),"object"==typeof window.advcake_data&&0===window.advcake_data.length&&window.advcakeEvents({pageType:1})
